<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ZXS Movie Launcher</title>
  <link rel="icon" type="image/x-icon" href="pbmovies.png" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&display=swap" rel="stylesheet" />
  <style>
    /* Existing styles untouched... */
    body {
      font-family: 'Orbitron', sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #0d0d0d, #1a1a1a 40%, #101820);
      color: #f0f0f0;
      overflow-x: hidden;
    }
    body::before {
      content: "";
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background-image: linear-gradient(90deg, rgba(0,188,212,0.1) 1px, transparent 1px),
                        linear-gradient(180deg, rgba(0,188,212,0.1) 1px, transparent 1px);
      background-size: 50px 50px;
      z-index: 0;
      animation: moveGrid 20s linear infinite;
    }
    @keyframes moveGrid {
      from { transform: translate(0,0); }
      to { transform: translate(-50px,-50px); }
    }
    h1 {
      text-align: center;
      margin: 25px 0;
      font-size: 3.5rem;
      color: #00e5ff;
      text-shadow: 0 0 15px #00e5ff, 0 0 25px #2196f3;
      position: relative;
      z-index: 1;
    }
    .tab-container {
      display: flex;
      justify-content: center;
      margin: 20px 0;
      z-index: 2;
      position: relative;
    }
    .tab-button {
      padding: 12px 28px;
      margin: 0 12px;
      font-size: 16px;
      border: 2px solid #00e5ff;
      background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
      color: #fff;
      cursor: pointer;
      border-radius: 40px;
      transition: all 0.4s ease;
      box-shadow: 0 0 12px rgba(0, 229, 255, 0.5);
    }
    .tab-button:hover {
      transform: scale(1.08);
      box-shadow: 0 0 25px rgba(0, 229, 255, 0.7);
    }
    .tab-button.active {
      background: linear-gradient(135deg, #00e5ff, #00bcd4);
      color: #000;
      font-weight: bold;
      text-shadow: none;
      box-shadow: 0 0 25px rgba(0,229,255,1);
    }
    .container {
      max-width: 850px;
      margin: 30px auto;
      padding: 35px;
      border: 2px solid rgba(0,229,255,0.3);
      border-radius: 20px;
      background: rgba(15, 15, 15, 0.9);
      box-shadow: 0 0 40px rgba(0,229,255,0.2);
      position: relative;
      z-index: 1;
      transition: all 0.4s ease;
    }
    .container:hover {
      transform: scale(1.01);
      box-shadow: 0 0 50px rgba(0,229,255,0.4);
    }
    .input-container {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      margin-bottom: 25px;
      justify-content: center;
    }
    input, select, button {
      padding: 12px 16px;
      font-size: 16px;
      border-radius: 12px;
      background: rgba(30,30,30,0.9);
      color: #00e5ff;
      border: 2px solid #00bcd4;
      transition: all 0.3s ease;
      flex: 1;
    }
    input:focus, select:focus {
      outline: none;
      background: #111;
      box-shadow: 0 0 15px #00e5ff;
    }
    button {
      background: linear-gradient(135deg, #00bcd4, #2196f3);
      border: none;
      color: #000;
      font-weight: bold;
      cursor: pointer;
      flex: 0 0 auto;
      transition: all 0.3s ease;
      box-shadow: 0 0 15px rgba(0,229,255,0.7);
    }
    button:hover {
      transform: scale(1.08);
      box-shadow: 0 0 30px rgba(0,229,255,1);
    }
  </style>
</head>
<body>
  <h1>ðŸš€ ZXS MOVIE LAUNCHER</h1>
  <div class="tab-container">
    <button class="tab-button active" onclick="showTab('movies')"> Movies</button>
    <button class="tab-button" onclick="showTab('tvshows')"> TV Shows</button>
    <button class="tab-button" onclick="showTab('cloak')"> Cloak</button>
  </div>
  <!-- Movies Tab -->
  <div id="movies" class="container">
    <div class="input-container">
      <input id="movieMediaId" type="text" placeholder="Enter Movie IMDB ID">
      <select id="movieProvider">
        <option value="vidsrc">Vidsrc (.to)</option>
        <option value="frembed">Vidsrc (.xyz)</option> 
        <option value="autoembed">Vidsrc (.in)</option>
        <option >Vidsrc (.cc) Broken</option>
        <option value="smashystream">Vidsrc (.net)</option> 
        <option value="superembed">Embedsu</option>
      </select>
      <button onclick="playMovie()">â–¶ Play Movie</button>
    </div>
    <iframe id="moviePlayer" src="" allowfullscreen></iframe>
    <div class="logged-ids" id="movieLog">
      <h3>Logged Movie TMDB IDs</h3>
      <ul id="movieIdList"></ul>
    </div>
  </div>
  <!-- TV Shows Tab -->
  <div id="tvshows" class="container" style="display: none;">
    <div class="input-container">
      <input id="tvMediaId" type="text" placeholder="Enter TV Show TMDB ID">
      <input id="seasonNumber" type="number" placeholder="Season" min="1">
      <input id="episodeNumber" type="number" placeholder="Episode" min="1">
      <select id="tvProvider">
        <option value="vidsrc">Vidsrc (.to)</option>
        <option value="frembed">Vidsrc (.xyz)</option> 
        <option value="autoembed">Vidsrc (.in)</option>
        <option value="smashystream">Vidsrc (.net)</option> 
        <option value="upcloud">Vidsrc (.cc)</option> 
        <option value="superembed">Embedsu</option>
      </select>
      <button onclick="playTvShow()">â–¶ Play TV Show</button>
    </div>
    <iframe id="tvPlayer" src="" allowfullscreen></iframe>
    <div class="logged-ids" id="tvLog">
      <h3>Logged TV Show TMDB IDs</h3>
      <ul id="tvIdList"></ul>
    </div>
  </div>
  <!-- Cloak Tab -->
<!-- Cloak Tab -->
<div id="cloak" class="container" style="display: none;">
  <div class="input-container">
    <select id="idType" style="flex: 0 0 150px;" onchange="toggleSeasonEpisodeInputs()">
      <option value="imdb">IMDb ID</option>
      <option value="tmdb">TMDb ID</option>
    </select>
    <input id="cloakMediaId" type="text" placeholder="Enter ID" style="flex: 1 1 200px;" />
    <input id="seasonNumber" type="number" placeholder="Season" min="1" style="flex: 0 0 100px; display:none;" />
    <input id="episodeNumber" type="number" placeholder="Episode" min="1" style="flex: 0 0 100px; display:none;" />
    <select id="cloakProvider" style="flex: 0 0 180px;">
      <option value="frembed">Vidsrc (.xyz)</option> 
      <option value="vidsrc">Vidsrc (.to)</option>
      <option value="autoembed">Vidsrc (.in)</option>
      <option value="upcloud">Vidsrc (.cc)</option>
      <option value="smashystream">Vidsrc (.net)</option> 
      <option value="superembed">Embedsu</option>
    </select>
    <button onclick="launchCloak()">â–¶ Launch</button>
  </div>
  <p style="text-align:center; font-size: 0.9rem; color: #888;">Opens video in a new tab with cloaked URL</p>
</div>

<script>
function toggleSeasonEpisodeInputs() {
  const idType = document.getElementById("idType").value;
  const seasonInput = document.getElementById("seasonNumber");
  const episodeInput = document.getElementById("episodeNumber");
  if (idType === "tmdb") {
    seasonInput.style.display = "inline-block";
    episodeInput.style.display = "inline-block";
  } else {
    seasonInput.style.display = "none";
    episodeInput.style.display = "none";
  }
}

// Existing launchCloak function; add season and episode params if TMDb TV show
async function launchCloak() {
  const idType = document.getElementById("idType").value;
  const inputId = document.getElementById("cloakMediaId").value.trim();
  const season = document.getElementById("seasonNumber").value.trim();
  const episode = document.getElementById("episodeNumber").value.trim();
  if (!inputId) {
    return alert("Please enter an ID.");
  }
  const provider = document.getElementById("cloakProvider").value;
  try {
    let imdbId = inputId;
    if (idType === "tmdb") {
      // Convert TMDb ID to IMDb ID (movie or TV show)
      const response = await fetch(`https://api.themoviedb.org/3/find/${inputId}?api_key=${apiKey}&external_source=imdb_id`);
      if (!response.ok) throw new Error("Invalid TMDb ID or API error");
      const data = await response.json();

      // To accurately get IMDb ID of TV show or movie, use TV or movie endpoints instead
      // Here using movie endpoint fallback to external_ids:
      const extIdResponse = await fetch(`https://api.themoviedb.org/3/tv/${inputId}?api_key=${apiKey}&append_to_response=external_ids`)
        .then(r => r.ok ? r.json() : null);
      if (extIdResponse && extIdResponse.external_ids && extIdResponse.external_ids.imdb_id) {
        imdbId = extIdResponse.external_ids.imdb_id.replace(/^tt/, '');
      } else {
        // fallback to movie external_ids
        const movieExtIdResponse = await fetch(`https://api.themoviedb.org/3/movie/${inputId}?api_key=${apiKey}&append_to_response=external_ids`)
          .then(r => r.ok ? r.json() : null);
        if (movieExtIdResponse && movieExtIdResponse.external_ids && movieExtIdResponse.external_ids.imdb_id) {
          imdbId = movieExtIdResponse.external_ids.imdb_id.replace(/^tt/, '');
        } else {
          throw new Error("IMDb ID not found for this TMDb ID");
        }
      }
      // Use season and episode for TV shows only, validate inputs
      if (season && episode) {
        // Construct TV embed URL with season and episode:
        let url = "";
        switch (provider) {
          case "frembed": url = `https://vidsrc.xyz/embed/tv/${inputId}/${season}/${episode}`; break;
          case "superembed": url = `https://embed.su/embed/tv/${inputId}/${season}/${episode}`; break;
          case "smashystream": url = `https://vidsrc.net/embed/tv/${inputId}/${season}/${episode}`; break;
          case "autoembed": url = `https://vidsrc.in/embed/tv/${inputId}/${season}/${episode}`; break;
          case "upcloud": url = `https://vidsrc.cc/embed/tv/${inputId}/${season}/${episode}`; break;
          case "vidsrc": url = `https://vidsrc.to/embed/tv/${inputId}/${season}/${episode}`; break;
        }
        const win = window.open('about:blank');
        win.document.write(`
          <html><head><title>Video Player</title><style>body,html{margin:0;overflow:hidden;background:#000;height:100%}iframe{border:none;width:100%;height:100%}</style></head><body><iframe src="${url}" allowfullscreen></iframe></body></html>
        `);
        win.document.close();
        return;
      }
    } else {
      // If IMDb ID entered, strip 'tt' if present and only do movie embed since no season/episode for IMDb ID here
      imdbId = inputId.replace(/^tt/, '');
    }
    // Construct the embed URL based on provider for movies only
    let url = "";
    switch (provider) {
      case "frembed": url = `https://vidsrc.xyz/embed/movie?imdb=${imdbId}`; break;
      case "superembed": url = `https://embed.su/embed/movie/${imdbId}`; break;
      case "smashystream": url = `https://vidsrc.net/embed/movie?imdb=${imdbId}`; break;
      case "autoembed": url = `https://vidsrc.in/embed/movie/${imdbId}`; break;
      case "upcloud": url = `https://vidsrc.cc/embed/movie/${imdbId}`; break;
      case "vidsrc": url = `https://vidsrc.to/embed/movie/${imdbId}`; break;
    }
    // Open about:blank window
    const win = window.open('about:blank');
    win.document.write(`
      <html>
        <head>
          <title>Video Player</title>
          <style>
            body,html { margin:0; height:100%; overflow:hidden; background:#000; }
            iframe { border:none; width:100%; height:100%; }
          </style>
        </head>
        <body>
          <iframe src="${url}" allowfullscreen></iframe>
        </body>
      </html>
    `);
    win.document.close();
  } 
  
}

// Call once on page load to set initial season/episode input display
toggleSeasonEpisodeInputs();
</script>

  <script>
    const apiKey = 'a24c4f9e8a288d266b2453d737f19f54'; 

    // Store TMDB IDs
    const movieIdSet = new Set();
    const tvIdSet = new Set();

    // Show tab content
    function showTab(tab) {
      document.getElementById('movies').style.display = tab === 'movies' ? 'block' : 'none';
      document.getElementById('tvshows').style.display = tab === 'tvshows' ? 'block' : 'none';
      document.getElementById('cloak').style.display = tab === 'cloak' ? 'block' : 'none';
      document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
      document.querySelector(`.tab-button[onclick="showTab('${tab}')"]`).classList.add('active');
    }

    // Play movie + log ID
    function playMovie() {
      const mediaId = document.getElementById("movieMediaId").value.trim();
      if (!mediaId) return alert("Please enter a TMDB ID for the movie.");
      const provider = document.getElementById("movieProvider").value;
      let url = "";
      switch (provider) {
        case "frembed": url = `https://vidsrc.xyz/embed/movie?imdb=${mediaId}`; break;
        case "superembed": url = `https://embed.su/embed/movie/${mediaId}`; break;
        case "smashystream": url = `https://vidsrc.net/embed/movie?imdb=${mediaId}`; break;
        case "autoembed": url = `https://vidsrc.in/embed/movie/${mediaId}`; break;
        case "upcloud": url = `https://vidsrc.cc/embed/movie/${mediaId}`; break;
        case "vidsrc": url = `https://vidsrc.to/embed/movie/${mediaId}`; break;
      }
      document.getElementById("moviePlayer").src = url;
      if (!movieIdSet.has(mediaId)) {
        movieIdSet.add(mediaId);
        updateIdList("movieIdList", movieIdSet);
      }
    }

    // Play TV show + log ID
    function playTvShow() {
      const mediaId = document.getElementById("tvMediaId").value.trim();
      const seasonNumber = document.getElementById("seasonNumber").value.trim();
      const episodeNumber = document.getElementById("episodeNumber").value.trim();
      if (!mediaId || !seasonNumber || !episodeNumber) return alert("Please enter all details for the TV show.");
      const provider = document.getElementById("tvProvider").value;
      let url = "";
      switch (provider) {
        case "frembed": url = `https://vidsrc.xyz/embed/tv/${mediaId}/${seasonNumber}/${episodeNumber}`; break;
        case "superembed": url = `https://embed.su/embed/tv/${mediaId}/${seasonNumber}/${episodeNumber}`; break;
        case "smashystream": url = `https://vidsrc.net/embed/tv/${mediaId}/${seasonNumber}/${episodeNumber}`; break;
        case "autoembed": url = `https://vidsrc.in/embed/tv/${mediaId}/${seasonNumber}/${episodeNumber}`; break;
        case "upcloud": url = `https://vidsrc.cc/embed/tv/${mediaId}/${seasonNumber}/${episodeNumber}`; break;
        case "vidsrc": url = `https://vidsrc.to/embed/tv/${mediaId}/${seasonNumber}/${episodeNumber}`; break;
      }
      document.getElementById("tvPlayer").src = url;
      if (!tvIdSet.has(mediaId)) {
        tvIdSet.add(mediaId);
        updateIdList("tvIdList", tvIdSet);
      }
    }

    // Update logged IDs list display
    function updateIdList(logId, idSet) {
      const list = document.getElementById(logId);
      list.innerHTML = '';
      idSet.forEach(id => {
        const li = document.createElement('li');
        li.textContent = id;
        list.appendChild(li);
      });
    }

  

  </script>
</body>
</html>
