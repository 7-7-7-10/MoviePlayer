<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title id="main-title">PHOENIX | MOVIES</title>
  <link rel="icon" type="image/x-icon" href="https://cdn-icons-png.flaticon.com/512/616/616494.png" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Orbitron', sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #1a0a00, #3d1a00 40%, #ff9100 100%);
      color: #fff3e0;
      overflow-x: hidden;
      transition: background 0.3s;
    }
    body.theme-orange {
      background: linear-gradient(135deg, #1a0a00, #3d1a00 40%, #ff9100 100%);
      color: #fff3e0;
    }
    body.theme-blue {
      background: linear-gradient(135deg, #0a1a2a, #1a3d5c 40%, #2196f3 100%);
      color: #e3f2fd;
    }
    body.theme-red {
      background: linear-gradient(135deg, #2a0a0a, #5c1a1a 40%, #e53935 100%);
      color: #ffebee;
    }
    body::before {
      content: "";
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background-image: linear-gradient(90deg, rgba(255,140,0,0.09) 1px, transparent 1px),
                        linear-gradient(180deg, rgba(255,140,0,0.09) 1px, transparent 1px);
      background-size: 50px 50px;
      z-index: 0;
      animation: moveGrid 20s linear infinite;
      pointer-events: none;
    }
    @keyframes moveGrid {
      from { transform: translate(0,0); }
      to { transform: translate(-50px,-50px); }
    }
    h1 {
      text-align: center;
      margin: 28px 0 10px 0;
      font-size: 3.7rem;
      color: #ff9100;
      text-shadow: 0 0 24px #ff6f00, 0 0 50px #ff3d00;
      position: relative;
      z-index: 1;
      letter-spacing: 2px;
      animation: fadeFire 2s;
      transition: color 0.3s;
    }
    body.theme-blue h1 {
      color: #2196f3;
      text-shadow: 0 0 24px #1976d2, 0 0 50px #1565c0;
    }
    body.theme-red h1 {
      color: #e53935;
      text-shadow: 0 0 24px #b71c1c, 0 0 50px #ff1744;
    }
    @keyframes fadeFire {
      0% { color: #000; text-shadow: 0 0 0 #000;}
      100% { color: #ff9100; text-shadow: 0 0 24px #ff6f00, 0 0 50px #ff3d00;}
    }
    .catchphrase {
      text-align: center;
      font-size: 1.35rem;
      margin-bottom: 16px;
      font-weight: 700;
      color: #ffd180;
      letter-spacing: 1px;
      text-shadow: 0 0 8px #ff6f00;
      animation: fadeFire 2.5s;
      transition: color 0.3s;
    }
    body.theme-blue .catchphrase { color: #90caf9; text-shadow: 0 0 8px #2196f3; }
    body.theme-red .catchphrase { color: #ffcdd2; text-shadow: 0 0 8px #e53935; }
    .container {
      max-width: 850px;
      margin: 30px auto;
      padding: 35px;
      border: 2px solid #ff9100;
      border-radius: 20px;
      background: rgba(40, 20, 0, 0.92);
      box-shadow: 0 0 50px #ff6f00;
      position: relative;
      z-index: 1;
      transition: all 0.4s ease;
      animation: borderFade 2s;
    }
    body.theme-blue .container {
      border-color: #2196f3;
      background: rgba(10, 30, 60, 0.92);
      box-shadow: 0 0 50px #2196f3;
    }
    body.theme-red .container {
      border-color: #e53935;
      background: rgba(60, 10, 10, 0.92);
      box-shadow: 0 0 50px #e53935;
    }
    @keyframes borderFade {
      0% { border-color: #000; }
      100% { border-color: #ff9100; }
      #playerBtnRow button {
  min-width: 130px;
  padding: 10px 0;
  border-radius: 40px;         /* Makes both buttons pill-shaped */
  font-size: 1.17rem;
  font-weight: bold;
  box-shadow: 0 0 15px #ff910030;
  border: none;
  background: linear-gradient(135deg, #ff9100 30%, #ff3d00 100%);
  color: #fffbe6;
  transition: all 0.4s ease;
  cursor: pointer;
  margin: 0;                  /* Remove extra margins */
  outline: none;
}
#playerBtnRow button:hover {
  background: linear-gradient(135deg, #ff3d00, #ff9100);
  color: #fff;
  border: 2px solid #ff3d00;
  transform: scale(1.08);
}

body.theme-blue #playerBtnRow button {
  background: linear-gradient(135deg, #2196f3 30%, #1565c0 100%);
  color: #e3f2fd;
  box-shadow: 0 0 15px #2196f330;
}
body.theme-blue #playerBtnRow button:hover {
  background: linear-gradient(135deg, #1565c0 0%, #2196f3 100%);
  border: 2px solid #1976d2;
  color: #fff;
}

body.theme-red #playerBtnRow button {
  background: linear-gradient(135deg, #e53935 30%, #b71c1c 100%);
  color: #ffebee;
  box-shadow: 0 0 15px #b71c1ca0;
}
body.theme-red #playerBtnRow button:hover {
  background: linear-gradient(135deg, #b71c1c 0%, #e53935 100%);
  border: 2px solid #b71c1c;
  color: #fff;
}

body.theme-green #playerBtnRow button {
  background: linear-gradient(135deg, #34c759 30%, #145c26 100%);
  color: #eaffea;
}
body.theme-green #playerBtnRow button:hover {
  background: linear-gradient(135deg, #145c26 0%, #34c759 100%);
  border: 2px solid #145c26;
  color: #fff;
}

body.theme-void #playerBtnRow button {
  background: linear-gradient(135deg, #444 30%, #222 100%);
  color: #eaeaea;
}
body.theme-void #playerBtnRow button:hover {
  background: linear-gradient(135deg, #222 0%, #444 100%);
  border: 2px solid #222;
  color: #fff;
}
    }
    .container:hover {
      transform: scale(1.01);
      box-shadow: 0 0 60px #ff3d00;
    }
    body.theme-blue .container:hover {
      box-shadow: 0 0 60px #1976d2;
    }
    body.theme-red .container:hover {
      box-shadow: 0 0 60px #ff1744;
    }
    .input-container {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      margin-bottom: 25px;
      justify-content: center;
    }
    input, select, button {
      padding: 12px 16px;
      font-size: 16px;
      border-radius: 12px;
      background: rgba(60,30,0,0.95);
      color: #ff9100;
      border: 2px solid #ff6f00;
      transition: all 0.4s ease;
      flex: 1;
      box-shadow: 0 0 10px #ff910030;
      animation: borderFade 1.5s;
    }
    body.theme-blue input, body.theme-blue select, body.theme-blue button {
      background: rgba(10,30,60,0.95);
      color: #2196f3;
      border: 2px solid #1976d2;
      box-shadow: 0 0 10px #2196f330;
    }
    body.theme-red input, body.theme-red select, body.theme-red button {
      background: rgba(60,10,10,0.95);
      color: #e53935;
      border: 2px solid #b71c1c;
      box-shadow: 0 0 10px #e5393530;
    }
    input:focus, select:focus {
      outline: none;
      background: #2b1700;
      box-shadow: 0 0 15px #ff9100;
      border-color: #ff3d00;
    }
    button {
      background: linear-gradient(135deg, #ff9100 30%, #ff3d00 100%);
      border: none;
      color: #fffbe6;
      font-weight: bold;
      cursor: pointer;
      flex: 0 0 auto;
      transition: all 0.4s ease;
      box-shadow: 0 0 15px #ff6f00a0;
      animation: borderFade 1.5s;
    }
    body.theme-blue button {
      background: linear-gradient(135deg, #2196f3 30%, #1565c0 100%);
      color: #e3f2fd;
      box-shadow: 0 0 15px #1976d2a0;
    }
    body.theme-red button {
      background: linear-gradient(135deg, #e53935 30%, #b71c1c 100%);
      color: #ffebee;
      box-shadow: 0 0 15px #b71c1ca0;
    }
    button:hover {
      transform: scale(1.08);
      box-shadow: 0 0 28px #ff3d00;
      background: linear-gradient(135deg, #ff3d00 0%, #ff9100 100%);
      color: #fff;
      border: 2px solid #ff3d00;
    }
    body.theme-blue button:hover {
      box-shadow: 0 0 28px #1565c0;
      background: linear-gradient(135deg, #1565c0 0%, #2196f3 100%);
      border: 2px solid #1976d2;
      color: #fff;
    }
    body.theme-red button:hover {
      box-shadow: 0 0 28px #ff1744;
      background: linear-gradient(135deg, #b71c1c 0%, #e53935 100%);
      border: 2px solid #b71c1c;
      color: #fff;
    }
    .search-results {
      margin-top: 25px;
      display: flex;
      flex-wrap: wrap;
      gap: 22px;
      justify-content: center;
    }
    .search-item {
      background: rgba(50,22,0,0.9);
      border: 2px solid #ff9100;
      border-radius: 12px;
      padding: 22px;
      width: 320px;
      transition: all 0.4s;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      cursor: pointer;
      animation: borderFade 2.2s;
    }
    .stats-panel {
  background: rgba(255,255,255,0.06);
  border-radius: 12px;
  padding: 18px 30px;
  margin-bottom: 22px;
  box-shadow: 0 0 18px #ff910080;
  color: #ff9100;
  font-size: 1.15rem;
  text-align: center;
  transition: background 0.3s, color 0.3s;
}
body.theme-blue .stats-panel { color: #2196f3; }
body.theme-red .stats-panel { color: #e53935; }
body.theme-green .stats-panel { color: #34c759; }
body.theme-void .stats-panel { color: #eaeaea; }
.stats-panel h2 {
  margin-bottom: 14px;
  font-size: 1.35rem;
  font-weight: bold;
}
.stats-row {
  display: flex;
  justify-content: space-between;
  margin-bottom: 8px;
  font-size: 1.08rem;
}
    body.theme-blue .search-item {
      background: rgba(10,30,60,0.9);
      border-color: #2196f3;
    }
    body.theme-red .search-item {
      background: rgba(60,10,10,0.9);
      border-color: #e53935;
    }
    .search-item:hover {
      transform: scale(1.045);
      background: linear-gradient(135deg, #ff9100, #ff3d00);
      color: #fffbe6;
      font-weight: bold;
      box-shadow: 0 0 28px #ff6f00a0;
      border-color: #ff3d00;
    }
    body.theme-blue .search-item:hover {
      background: linear-gradient(135deg, #2196f3, #1565c0);
      box-shadow: 0 0 28px #2196f3a0;
      border-color: #1565c0;
      color: #fffbe6;
    }
    body.theme-red .search-item:hover {
      background: linear-gradient(135deg, #e53935, #b71c1c);
      box-shadow: 0 0 28px #e53935a0;
      border-color: #b71c1c;
      color: #fffbe6;
    }
    .search-title {
      font-size: 1.35rem;
      color: #ff9100;
      margin: 9px 0 5px 0;
      font-weight: 700;
      text-shadow: 0 0 6px #ff3d00;
      animation: fadeFire 1.5s;
      transition: color 0.3s;
    }
    body.theme-blue .search-title { color: #2196f3; text-shadow: 0 0 6px #1565c0; }
    body.theme-red .search-title { color: #e53935; text-shadow: 0 0 6px #b71c1c; }
    .search-type {
      font-size: 1.05rem;
      color: #ff6f00;
      margin-bottom: 6px;
      font-weight: 500;
      transition: color 0.3s;
    }
    body.theme-blue .search-type { color: #1565c0; }
    body.theme-red .search-type { color: #b71c1c; }
    .id-info {
      margin: 8px 0 0 0;
      font-size: 0.98rem;
      color: #ffab40;
      background: rgba(255,145,0,0.09);
      border-radius: 7px;
      padding: 6px 12px;
      word-break: break-all;
      width: 100%;
      text-align: left;
      box-sizing: border-box;
      transition: color 0.3s, background 0.3s;
    }
    body.theme-blue .id-info {
      color: #90caf9;
      background: rgba(33,150,243,0.09);
    }
    body.theme-red .id-info {
      color: #ffcdd2;
      background: rgba(229,57,53,0.09);
    }
    .theme-switcher {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 16px;
      margin-bottom: 20px;
    }
    .theme-btn {
      padding: 9px 18px;
      border-radius: 10px;
      font-size: 1.05rem;
      font-weight: bold;
      border: none;
      cursor: pointer;
      transition: all 0.3s;
    }
    .theme-btn.orange { background: #ff9100; color: #fff;}
    .theme-btn.blue { background: #2196f3; color: #fff;}
    .theme-btn.red { background: #e53935; color: #fff;}
    .theme-btn.active { outline: 2px solid #fffbe6; }
    .recent-searches-block {
      margin-top: 32px;
      margin-bottom: 18px;
      background: rgba(255,255,255,0.05);
      border-radius: 12px;
      padding: 14px 22px;
      box-shadow: 0 0 18px #ff910050;
      text-align: center;
      transition: background 0.3s, color 0.3s;
    }
    .recent-title {
      font-size: 1.19rem;
      font-weight: bold;
      margin-top: 32px;  /* Increased space above Recent Searches */
      margin-bottom: 8px;
      color: #ff9100;
    }
    body.theme-blue .recent-title { color: #2196f3; }
    body.theme-red .recent-title { color: #e53935; }
    .recent-list {
      list-style: none;
      padding: 0;
      margin: 0 0 4px 0;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
    }
    .recent-list li {
      background: rgba(255,145,0,0.11);
      color: #ff9100;
      border-radius: 7px;
      padding: 5px 12px;
      cursor: pointer;
      border: none;
      font-size: 0.99rem;
      transition: background 0.3s, color 0.3s;
    }
    body.theme-blue .recent-list li {
      background: rgba(33,150,243,0.11); color: #2196f3;
    }
    body.theme-red .recent-list li {
      background: rgba(229,57,53,0.11); color: #e53935;
    }
    .recent-list li:hover {
      background: #ff9100; color: #fff;
    }
    body.theme-blue .recent-list li:hover {
      background: #2196f3; color: #fff;
    }
    body.theme-red .recent-list li:hover {
      background: #e53935; color: #fff;
    }
    .last-playing-block {
      margin-bottom: 18px;
      margin-top: 32px;
      background: rgba(255,255,255,0.05);
      border-radius: 12px;
      padding: 14px 22px;
      box-shadow: 0 0 18px #ff910050;
      text-align: center;
      transition: background 0.3s, color 0.3s;
      font-size: 1.07rem;
    }
    .last-playing-title {
      font-weight: bold;
      color: #ff9100;
      margin-right: 8px;
    }
    body.theme-blue .last-playing-title { color: #2196f3; }
    body.theme-red .last-playing-title { color: #e53935; }
    #playerModal {
      display: none;
      position: fixed;
      left: 0; top: 0;
      width: 100vw; height: 100vh;
      background: rgba(40, 20, 0, 0.90);
      z-index: 9999;
      align-items: center;
      justify-content: center;
      flex-direction: column;
    }
    #playerModal.show {
      display: flex;
      animation: fadeIn 0.3s;
    }
      #playerBtnRow {
  display: flex;
  gap: 16px;
  justify-content: center;
  margin-top: 20px;
}
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to   { opacity: 1; }
    }
    #playerFrame {
      width: 90vw;
      max-width: 900px;
      height: 70vh;
      border: 4px solid #ff9100;
      border-radius: 18px;
      background: #000;
      box-shadow: 0 0 40px #ff6f00;
      animation: borderFade 2s;
    }
    body.theme-blue #playerFrame {
      border-color: #2196f3; box-shadow: 0 0 40px #2196f3;
    }
    body.theme-red #playerFrame {
      border-color: #e53935; box-shadow: 0 0 40px #e53935;
    }
   
    }
    body.theme-green {
  background: linear-gradient(135deg, #072a07, #145c26 40%, #34c759 100%);
  color: #eaffea;
}
body.theme-void {
  background: linear-gradient(135deg, #181818, #2f2f2f 40%, #666 100%);
  color: #eaeaea;
}
    /* Emerald theme overrides */
body.theme-green .catchphrase { color: #34c759; text-shadow: 0 0 8px #34c759; }
body.theme-green .recent-title { color: #34c759; }
body.theme-green .last-playing-title { color: #34c759; }
body.theme-green .search-status-text { color: #34c759; }

body.theme-green .recent-list li {
  background: rgba(52,199,89,0.11);
  color: #34c759;
}
body.theme-green .recent-list li:hover {
  background: #34c759;
  color: #fff;
}

/* Void theme overrides */
body.theme-void .catchphrase { color: #eaeaea; text-shadow: 0 0 8px #666; }
body.theme-void .recent-title { color: #eaeaea; }
body.theme-void .last-playing-title { color: #eaeaea; }
body.theme-void .search-status-text { color: #eaeaea; }

body.theme-void .recent-list li {
  background: rgba(120,120,120,0.16);
  color: #eaeaea;
}
body.theme-void .recent-list li:hover {
  background: #eaeaea;
  color: #222;
}

body.theme-green h1 {
  color: #34c759;
  text-shadow: 0 0 24px #145c26, 0 0 50px #072a07;
}
body.theme-void h1 {
  color: #eaeaea;
  text-shadow: 0 0 24px #666, 0 0 50px #222;
}

/* Buttons */
.theme-btn.green { background: #34c759; color: #fff; }
.theme-btn.void { background: #444; color: #fff; }
body.theme-green .container {
  border-color: #34c759;
  background: rgba(7, 42, 7, 0.92);
  box-shadow: 0 0 50px #34c759;
}
body.theme-void .container {
  border-color: #666;
  background: rgba(24, 24, 24, 0.92);
  box-shadow: 0 0 50px #222;
}
body.theme-green .container:hover {
  box-shadow: 0 0 60px #145c26;
}
body.theme-void .container:hover {
  box-shadow: 0 0 60px #666;
}

body.theme-green button,
body.theme-green input,
body.theme-green select {
  background: rgba(7,42,7,0.95);
  color: #34c759;
  border: 2px solid #145c26;
  box-shadow: 0 0 10px #34c75930;
}
body.theme-green button {
  background: linear-gradient(135deg, #34c759 30%, #145c26 100%);
  color: #eaffea;
  box-shadow: 0 0 15px #34c759a0;
}
body.theme-green button:hover {
  box-shadow: 0 0 28px #145c26;
  background: linear-gradient(135deg, #145c26 0%, #34c759 100%);
  border: 2px solid #145c26;
  color: #fff;
}

body.theme-void button,
body.theme-void input,
body.theme-void select {
  background: rgba(24,24,24,0.95);
  color: #eaeaea;
  border: 2px solid #444;
  box-shadow: 0 0 10px #444a;
}
body.theme-void button {
  background: linear-gradient(135deg, #444 30%, #222 100%);
  color: #eaeaea;
  box-shadow: 0 0 15px #222a;
}
body.theme-void button:hover {
  box-shadow: 0 0 28px #666;
  background: linear-gradient(135deg, #222 0%, #444 100%);
  border: 2px solid #222;
  color: #fff;
}
    body.theme-midnight {
  background: #121212;
  color: #e0e0e0;
}
body.theme-midnight h1,
body.theme-midnight .catchphrase,
body.theme-midnight .recent-title,
body.theme-midnight .last-playing-title,
body.theme-midnight .search-title,
body.theme-midnight .stats-panel {
  color: #e0e0e0 !important;
  text-shadow: none;
}

body.theme-midnight .container,
body.theme-midnight .stats-panel,
body.theme-midnight .search-item,
body.theme-midnight #playerModal {
  background: #181818 !important;
  border-color: #222 !important;
  box-shadow: none !important;
}

body.theme-midnight .theme-switcher,
body.theme-midnight .input-container,
body.theme-midnight .recent-searches-block,
body.theme-midnight .last-playing-block {
  background: none !important;
  box-shadow: none !important;
  border: none !important;
}

body.theme-midnight .theme-btn {
  background: #111 !important;
  color: #fff !important;
  outline: none !important;
  box-shadow: none !important;
}
body.theme-midnight .theme-btn.midnight.active {
  outline: 2px solid #fffbe6 !important;
}

body.theme-midnight input,
body.theme-midnight select,
body.theme-midnight button,
body.theme-midnight #playerBtnRow button {
  background: #222 !important;
  color: #e0e0e0 !important;
  border: 1.5px solid #333 !important;
  box-shadow: none !important;
  border-radius: 40px !important;
}

body.theme-midnight #playerBtnRow {
  background: none !important;
  box-shadow: none !important;
  border: none !important;
}

body.theme-midnight #playerModal {
  background: #121212ee !important;
}

body.theme-midnight #playerFrame {
  border: 2px solid #222 !important;
  box-shadow: none !important;
  background: #000 !important;
}

body.theme-midnight .search-item.selected {
  background: #222 !important;
  border: 2px solid #e0e0e0 !important;
  color: #e0e0e0 !important;
  box-shadow: none !important;
}

body.theme-midnight .stats-panel {
  background: #181818 !important;
  box-shadow: none !important;
}

body.theme-midnight .recent-list li {
  background: #222 !important;
  color: #e0e0e0 !important;
}
body.theme-midnight .recent-list li:hover {
  background: #e0e0e0 !important;
  color: #222 !important;
}

body.theme-midnight .search-type,
body.theme-midnight .id-info {
  color: #bdbdbd !important;
}

body.theme-midnight #miniPlayerDock {
  background: #181818 !important;
  box-shadow: none !important;
  border: 1px solid #222 !important;
}
    #perfStatsPanel {
  background: rgba(255,255,255,0.06);
  border-radius: 12px;
  padding: 18px 30px;
  margin-bottom: 22px;
  box-shadow: 0 0 18px #ff910080;
  color: #ff9100;
  font-size: 1.15rem;
  text-align: center;
  transition: background 0.3s, color 0.3s;
}
body.theme-blue #perfStatsPanel { color: #2196f3; }
body.theme-red #perfStatsPanel { color: #e53935; }
body.theme-green #perfStatsPanel { color: #34c759; }
body.theme-void #perfStatsPanel { color: #eaeaea; }
body.theme-midnight #perfStatsPanel { color: #e0e0e0; background: #181818; }
    /* OVERRIDE: Make the Midnight theme button black */
.theme-btn.midnight {
  background: #111 !important;
  color: #fff !important;
  border: none !important;
  box-shadow: none !important;
}

/* When active, add a light outline */
.theme-btn.midnight.active {
  outline: 2px solid #fffbe6 !important;
}
.bookmark-btn {
  margin-left: 12px;
  padding: 8px 14px;
  background: #333;
  color: #ffeb3b;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  font-size: 1.05rem;
  font-weight: bold;
  transition: background 0.2s, color 0.2s;
}
.bookmark-btn:hover {
  background: #ff9100;
  color: #fff;
}

body.theme-blue .bookmark-btn { background: #1565c0; color: #90caf9; }
body.theme-blue .bookmark-btn:hover { background: #2196f3; color: #fff; }
body.theme-red .bookmark-btn { background: #b71c1c; color: #ffcdd2; }
body.theme-red .bookmark-btn:hover { background: #e53935; color: #fff; }
body.theme-green .bookmark-btn { background: #145c26; color: #aeea00; }
body.theme-green .bookmark-btn:hover { background: #34c759; color: #fff; }
body.theme-midnight .bookmark-btn { background: #222; color: #ffd600; }
body.theme-midnight .bookmark-btn:hover { background: #111; color: #fff; }
  </style>
</head>
<body class="theme-orange">
  <h1 id="main-header">Phoenix</h1>
  <div class="catchphrase">Unblocked. — Unstoppable. — Unbreakable.</div>
 <div class="container">
  <div class="theme-switcher">
    <span style="font-weight:bold;">Theme:</span>
    <button class="theme-btn orange active" onclick="setTheme('orange')">Orange</button>
    <button class="theme-btn blue" onclick="setTheme('blue')">Blue</button>
    <button class="theme-btn red" onclick="setTheme('red')">Red</button>
    <button class="theme-btn green" onclick="setTheme('green')">Emerald</button>
    <button class="theme-btn void" onclick="setTheme('void')">Void</button>
    <button class="theme-btn midnight" onclick="setTheme('midnight')">Midnight</button>
  </div>
  <div class="input-container">
    <input id="searchQuery" type="text" placeholder="Search by title..." />
    <button onclick="performSearch()">Search</button>
  </div>
  <div id="results" class="search-results"></div>
  <div id="lastPlayingBlock" class="last-playing-block" style="display:none;"></div>
   <div id="watchlistPanel" class="stats-panel" style="margin-top:36px;">
  <h2>My Watchlist</h2>
  <div id="watchlistList"></div>
</div>
  <div id="recentSearchesBlock" class="recent-searches-block" style="display:none;"></div>
   <div id="statsPanel" class="stats-panel">
  <h2>Statistics</h2>
  <div class="stats-row">
    <span>Movies Watched:</span> <span id="statsMoviesWatched">0</span>
  </div>
  <div class="stats-row">
    <span>TV Episodes Watched:</span> <span id="statsEpisodesWatched">0</span>
  </div>
    <div class="stats-row">
    <span>Total Time Spent:</span> <span id="statsTimeSpent">0h 0m</span>
  </div>
</div>
   
     <div id="perfStatsPanel" class="stats-panel">
  <h2>Performance Stats</h2>
  <div>
    <span>Page Load Time:</span> <span id="loadTimeStat">...</span>
  </div>
</div>
</div>
 
    </div>

  </div>
</div>
</div>
  <!-- Modal Player -->
  <div id="playerModal">
    <iframe id="playerFrame" allowfullscreen frameborder="0"></iframe>
   <div id="playerBtnRow" style="display:flex; gap:16px; justify-content:center;">
  <button id="closeBtn" onclick="closeModal()">✕ Close</button>
  <button id="minimizeBtn" title="Minimize player">Minimize</button>
</div>
  </div>

<script>
  function getWatchlist() {
  return JSON.parse(localStorage.getItem('watchlist') || '[]');
}

function saveWatchlist(list) {
  localStorage.setItem('watchlist', JSON.stringify(list));
}

function bookmarkItem(encItem) {
  const item = JSON.parse(decodeURIComponent(encItem));
  let list = getWatchlist();
  // Use a unique key (title + type + season/episode if TV)
  let key = item.type === "TV"
    ? `${item.title}|TV|S${item.season||""}E${item.episode||""}`
    : `${item.title}|Movie`;
  if (list.some(x => x.key === key)) {
    alert("Already in Watchlist!");
    return;
  }
  list.unshift({ ...item, key });
  saveWatchlist(list);
  updateWatchlistPanel();
}

function removeFromWatchlist(index) {
  let list = getWatchlist();
  list.splice(index, 1);
  saveWatchlist(list);
  updateWatchlistPanel();
}

function updateWatchlistPanel() {
  const panel = document.getElementById('watchlistList');
  let list = getWatchlist();
  if (!panel) return;
  if (!list.length) {
    panel.innerHTML = `<div style="color:#888;">No items in your Watchlist.</div>`;
    return;
  }
  panel.innerHTML = list.map((item, i) => {
    let desc = item.type === "Movie"
      ? `🎬 <strong>${item.title}</strong>`
      : `📺 <strong>${item.title}</strong> <span style="font-size:0.95em;">S${item.season||"-"}E${item.episode||"-"}</span>`;
    return `<div style="margin:8px 0;">
      ${desc}
      <button class="play-btn" style="margin-left:8px;" onclick="${item.type==='Movie'
        ? `playMovie('${encodeURIComponent(JSON.stringify(item))}')`
        : `askTvPlay('${encodeURIComponent(JSON.stringify(item))}')`}">▶ Play</button>
      <button class="bookmark-btn" style="margin-left:6px;background:#b71c1c;color:#fff;" onclick="removeFromWatchlist(${i})">✕ Remove</button>
    </div>`;
  }).join('');
}

// Call updateWatchlistPanel on page load
window.addEventListener('DOMContentLoaded', updateWatchlistPanel);

  function showLoadTimeStat() {
  // Use the browser Performance API for accurate results
  const timing = performance.timing;
  let loadTime;
  if (timing.loadEventEnd && timing.navigationStart) {
    loadTime = timing.loadEventEnd - timing.navigationStart;
  } else {
    // Fallback for modern browsers
    loadTime = performance.now();
  }
  document.getElementById('loadTimeStat').textContent = (loadTime / 1000).toFixed(2) + " s";
}

window.addEventListener('load', showLoadTimeStat);
  // --- Keyboard Shortcuts for MoviePlayer ---
(function() {
  let selectedIndex = -1;

  // Focus search box on "/" key
  document.addEventListener('keydown', function(e) {
    if (e.key === "/" && document.activeElement.tagName !== "INPUT" && document.activeElement.tagName !== "TEXTAREA") {
      e.preventDefault();
      const searchBox = document.getElementById('searchQuery');
      if (searchBox) searchBox.focus();
    }
  });

  // Esc to close modal
  document.addEventListener('keydown', function(e) {
    const modal = document.getElementById('playerModal');
    if (modal && modal.classList.contains('show') && e.key === "Escape") {
      // Replace with your modal close logic!
      if (typeof closeModal === "function") closeModal();
      else modal.classList.remove('show');
    }
  });

  // Arrow keys and Enter to navigate and activate search results
  document.addEventListener('keydown', function(e) {
    const searchBox = document.getElementById('searchQuery');
    const results = document.querySelectorAll('#results .search-item');
    if (searchBox && document.activeElement === searchBox && results.length > 0) {
      if (e.key === "ArrowDown") {
        e.preventDefault();
        selectedIndex = (selectedIndex + 1) % results.length;
        updateSelection(results, selectedIndex);
      } else if (e.key === "ArrowUp") {
        e.preventDefault();
        selectedIndex = (selectedIndex - 1 + results.length) % results.length;
        updateSelection(results, selectedIndex);
      } else if (e.key === "Enter" && selectedIndex >= 0) {
        e.preventDefault();
        // Simulate play button click for selected item
        const playBtn = results[selectedIndex].querySelector('.play-btn');
        if (playBtn) playBtn.click();
        else results[selectedIndex].click();
      } else if (e.key === "Escape") {
        selectedIndex = -1;
        updateSelection(results, selectedIndex);
        searchBox.blur();
      }
    }
  });

  function updateSelection(results, idx) {
    results.forEach((item, i) => {
      if (i === idx) {
        item.classList.add('selected');
        item.scrollIntoView({ block: 'nearest', behavior: 'smooth' });
      } else {
        item.classList.remove('selected');
      }
    });
  }

  // Optional: Style for the selected search item (injects CSS)
  const style = document.createElement('style');
  style.innerHTML = `
    .search-item.selected {
      border: 2.5px solid #fff;
      box-shadow: 0 0 32px #fff8, 0 0 8px #fff;
      background: rgba(60, 60, 60, 0.93);
      color: #fff;
      font-weight: bold;
      transition: box-shadow 0.18s, border 0.18s, background 0.18s;
    }
  `;
  document.head.appendChild(style);

  // Reset selection on new search
  const searchBox = document.getElementById('searchQuery');
  if (searchBox) {
    searchBox.addEventListener('input', function() {
      selectedIndex = -1;
      const results = document.querySelectorAll('#results .search-item');
      updateSelection(results, selectedIndex);
    });
  }
})();
  // --- Mini Player Logic FOR IFRAME ---

(function() {
  // Assumes modal: #playerModal, iframe: #playerFrame, minimize button: #minimizeBtn
  // Add a minimize button to your modal HTML: <button id="minimizeBtn">_</button>
  // Add a restore button inside mini player: <button id="restoreBtn">⤴</button>

  const modal = document.getElementById('playerModal');
  const iframe = document.getElementById('playerFrame');
  let miniPlayer = null;

  function createMiniPlayer() {
    if (miniPlayer) return;

    miniPlayer = document.createElement('div');
    miniPlayer.id = 'miniPlayerDock';
    miniPlayer.innerHTML = `
      <iframe id="miniIframe" src="${iframe.src}" allowfullscreen style="width:160px;height:90px;background:#000;border-radius:8px;border:2px solid #ff9100;"></iframe>
      <button id="restoreBtn" style="margin-top:5px;">⤴</button>
    `;
    Object.assign(miniPlayer.style, {
      position: 'fixed',
      bottom: '24px',
      right: '24px',
      background: '#222d',
      padding: '10px',
      borderRadius: '12px',
      boxShadow: '0 4px 32px #0008',
      zIndex: 9999,
      display: 'flex',
      flexDirection: 'column',
      alignItems: 'center'
    });
    document.body.appendChild(miniPlayer);

    miniPlayer.querySelector('#restoreBtn').onclick = restorePlayer;

    // Hide modal
    modal.classList.remove('show');
  }

  function restorePlayer() {
    // Restore iframe src
    iframe.src = miniPlayer.querySelector('#miniIframe').src;
    modal.classList.add('show');
    miniPlayer.remove();
    miniPlayer = null;
  }

  // Minimize button event
  const minimizeBtn = document.getElementById('minimizeBtn');
  if (minimizeBtn) minimizeBtn.onclick = createMiniPlayer;

  // Optional: handle modal close, remove mini player
  window.addEventListener('beforeunload', () => {
    if (miniPlayer) miniPlayer.remove();
  });

  // Keyboard shortcut: "m" to minimize when modal is open
  document.addEventListener('keydown', function(e) {
    if (e.key.toLowerCase() === "m" && modal.classList.contains('show')) {
      createMiniPlayer();
    }
  });
})();
  let moviedb = [];
  let tvdb = [];
  let databasesLoaded = false;

  // THEME SWITCHER LOGIC
function setTheme(theme) {
  document.body.className = 'theme-' + theme;
  document.querySelectorAll('.theme-btn').forEach(btn => btn.classList.remove('active'));
  document.querySelector('.theme-btn.' + theme).classList.add('active');
  if (theme === 'blue') {
    document.getElementById('main-title').textContent = 'ION | MOVIES';
    document.getElementById('main-header').textContent = 'ION';
  } else if (theme === 'red') {
    document.getElementById('main-title').textContent = 'Ember | MOVIES';
    document.getElementById('main-header').textContent = 'Ember';
  } else if (theme === 'green') {
    document.getElementById('main-title').textContent = 'Emerald | MOVIES';
    document.getElementById('main-header').textContent = 'Emerald';
  } else if (theme === 'void') {
    document.getElementById('main-title').textContent = 'Void | MOVIES';
    document.getElementById('main-header').textContent = 'Void';
  } else if (theme === 'midnight') {
    document.getElementById('main-title').textContent = 'Midnight | MOVIES';
    document.getElementById('main-header').textContent = 'Midnight';
  } else {
    document.getElementById('main-title').textContent = 'Phoenix | MOVIES';
    document.getElementById('main-header').textContent = 'Phoenix';
  }
}

  // RECENT SEARCHES
  function getRecentSearches() {
    return JSON.parse(localStorage.getItem('recentSearches') || '[]');
  }
  function saveRecentSearch(query) {
    if (!query || !query.trim()) return;
    let recent = getRecentSearches();
    recent = recent.filter(x => x !== query); // Remove duplicates
    recent.unshift(query);
    if (recent.length > 10) recent.pop();
    localStorage.setItem('recentSearches', JSON.stringify(recent));
  }
  function updateRecentSearchesBlock() {
    const query = document.getElementById('searchQuery').value.trim();
    const block = document.getElementById('recentSearchesBlock');
    const recent = getRecentSearches();
    if (!query && recent.length) {
      block.style.display = "";
      let html = `<div class="recent-title">Recent Searches</div><ul class="recent-list">`;
      for (const r of recent) {
        html += `<li onclick="useRecentSearch('${encodeURIComponent(r)}')">${r}</li>`;
      }
      html += "</ul>";
      block.innerHTML = html;
    } else {
      block.style.display = "none";
    }
  }
  function useRecentSearch(encQuery) {
    const query = decodeURIComponent(encQuery);
    document.getElementById('searchQuery').value = query;
    performSearch();
  }

  // LAST PLAYING
  function getLastPlaying() {
    return JSON.parse(localStorage.getItem('lastPlaying') || 'null');
  }
  function setLastPlaying(data) {
    localStorage.setItem('lastPlaying', JSON.stringify(data));
  }
  function updateLastPlayingBlock() {
    const query = document.getElementById('searchQuery').value.trim();
    const block = document.getElementById('lastPlayingBlock');
    const last = getLastPlaying();
    if (!query && last && last.title) {
      block.style.display = "";
      let typeIcon = last.type === "Movie" ? "🎬" : "📺";
      let info = last.type === "Movie"
        ? `<span class="last-playing-title">${typeIcon} Last Played:</span> ${last.title} <button onclick="resumeLastPlaying()">▶ Resume</button>`
        : `<span class="last-playing-title">${typeIcon} Last Played:</span> ${last.title} (S${last.season} E${last.episode}) <button onclick="resumeLastPlaying()">▶ Resume</button> <span style="font-size:0.93em;"></span>`;
      
      block.innerHTML = info;
    } else {
      block.style.display = "none";
    }
  }
  function resumeLastPlaying() {
    const last = getLastPlaying();
    if (!last) return;
    if (last.type === "Movie") {
      openModal(getMovieUrl(last));
    } else if (last.type === "TV") {
      openModal(getTvUrl(last, last.season, last.episode));
    }
  }

  // DATA LOADING
  async function loadDatabases() {
    try {
      const moviesResp = await fetch('Movie.json');
      if (moviesResp.ok) moviedb = await moviesResp.json();
      else moviedb = [];
    } catch { moviedb = []; }
    try {
      const tvResp = await fetch('TV.json');
      if (tvResp.ok) tvdb = await tvResp.json();
      else tvdb = [];
    } catch { tvdb = []; }
    databasesLoaded = true;
  }
  function getMovieUrl(item) {
    return item.imdb ? `https://vidsrc.xyz/embed/movie?imdb=${item.imdb}` : "";
  }
  function getTvUrl(item, season, episode) {
    return item.tmdb
      ? `https://vidsrc.xyz/embed/tv?tmdb=${item.tmdb}&season=${season}&episode=${episode}`
      : "";
  }

  function openModal(url) {
    const modal = document.getElementById('playerModal');
    const frame = document.getElementById('playerFrame');
    frame.src = url;
    modal.classList.add('show');
  }
  function closeModal() {
    const modal = document.getElementById('playerModal');
    const frame = document.getElementById('playerFrame');
    modal.classList.remove('show');
    frame.src = "";
  }
  function formatIdInfo(imdb, tmdb) {
    const imdbDisplay = imdb ? imdb : "<span style='color:#888'>N/A</span>";
    const tmdbDisplay = tmdb ? tmdb : "<span style='color:#888'>N/A</span>";
    return `<strong>IMDb:</strong> ${imdbDisplay}<br><strong>TMDB:</strong> ${tmdbDisplay}`;
  }
  async function performSearch() {
    const query = document.getElementById('searchQuery').value.toLowerCase().trim();
    const resultsDiv = document.getElementById('results');
    if (!databasesLoaded) await loadDatabases();

    // If both databases failed to load, use fallback sample data
    if ((moviedb.length === 0) && (tvdb.length === 0)) {
      moviedb = [{ title: "Phoenix Sample Movie", imdb: "tt1234567", tmdb: "10001" }];
      tvdb = [{ title: "Phoenix Sample TV Show", imdb: "tt9876543", tmdb: "20002" }];
    }

    if (!query) {
      resultsDiv.innerHTML = "<div style='text-align:center;color:#ffab40;'>Type a search query to see results.</div>";
      updateRecentSearchesBlock();
      updateLastPlayingBlock();
      return;
    }

    saveRecentSearch(query);
    updateRecentSearchesBlock();
    updateLastPlayingBlock();

    let results = [];
    results = results.concat(
      moviedb.filter(item => item.title && item.title.toLowerCase().includes(query))
             .map(item => ({...item, type: "Movie"}))
    );
    results = results.concat(
      tvdb.filter(item => item.title && item.title.toLowerCase().includes(query))
          .map(item => ({...item, type: "TV"}))
    );

    if (results.length === 0) {
      resultsDiv.innerHTML = "<div style='text-align:center;color:#ff9100;'>No results found.</div>";
      return;
    }

    resultsDiv.innerHTML = "";
    for (const item of results.slice(0, 40)) {
      if (item.type === "Movie") {
        const url = getMovieUrl(item);
        resultsDiv.innerHTML += `
          <div class="search-item">
            <div class="search-title">${item.title}</div>
            <div class="search-type">🎬 Movie</div>
            <div class="id-info">
              ${formatIdInfo(item.imdb, item.tmdb)}
            </div>
            <button class="play-btn" onclick="playMovie('${encodeURIComponent(JSON.stringify(item))}')">▶ Play</button>
            <button class="bookmark-btn" onclick="bookmarkItem('${encodeURIComponent(JSON.stringify(item))}')">★ Bookmark</button>

          </div>
        `;
      } else {
        resultsDiv.innerHTML += `
          <div class="search-item">
            <div class="search-title">${item.title}</div>
            <div class="search-type">📺 TV Show</div>
            <div class="id-info">
              ${formatIdInfo(item.imdb, item.tmdb)}
            </div>
            <button class="play-btn" onclick="askTvPlay('${encodeURIComponent(JSON.stringify(item))}')">▶ Play</button>
            <button class="bookmark-btn" onclick="bookmarkItem('${encodeURIComponent(JSON.stringify(item))}')">★ Bookmark</button>
          </div>
        `;
      }
    }
  }

  function playMovie(encItem) {
    const item = JSON.parse(decodeURIComponent(encItem));
    setLastPlaying({...item, type: "Movie"});
    openModal(getMovieUrl(item));
    updateLastPlayingBlock();
  }

  function askTvPlay(encItem) {
    const item = JSON.parse(decodeURIComponent(encItem));
    let season = prompt("Enter season number:", "1");
    if (season === null) return;
    season = season.replace(/[^0-9]/g, "");
    if (!season || +season < 1) {
      alert("Invalid season.");
      return;
    }
    let episode = prompt("Enter episode number:", "1");
    if (episode === null) return;
    episode = episode.replace(/[^0-9]/g, "");
    if (!episode || +episode < 1) {
      alert("Invalid episode.");
      return;
    }
    setLastPlaying({...item, type: "TV", season: season, episode: episode});
    openModal(getTvUrl(item, season, episode));
    updateLastPlayingBlock();
  }

  window.addEventListener('DOMContentLoaded', function() {
    document.getElementById('results').innerHTML = "<div style='text-align:center;color:#ffab40;'>Type a search query to see results.</div>";
    document.getElementById('searchQuery').addEventListener('keydown', function(e) {
      if (e.key === "Enter") performSearch();
    });
    document.querySelector('.input-container button').addEventListener('click', function() {
      performSearch();
    });
    document.getElementById('searchQuery').addEventListener('input', function() {
      updateRecentSearchesBlock();
      updateLastPlayingBlock();
      if (!this.value.trim()) {
        document.getElementById('results').innerHTML = "<div style='text-align:center;color:#ffab40;'>Type a search query to see results.</div>";
      }
    });
    updateRecentSearchesBlock();
    updateLastPlayingBlock();

    document.addEventListener('keydown', function(e) {
      const modal = document.getElementById('playerModal');
      if (modal.classList.contains('show') && e.key === "Escape") closeModal();
    });
    document.getElementById('playerModal').addEventListener('click', function(e) {
      if (e.target === this) closeModal();
    });
  });
  function getStats() {
  return JSON.parse(localStorage.getItem('playerStats') || '{"movies":0,"episodes":0,"minutes":0}');
}
function saveStats(stats) {
  localStorage.setItem('playerStats', JSON.stringify(stats));
}
function updateStatsPanel() {
  const stats = getStats();
  document.getElementById('statsMoviesWatched').textContent = stats.movies;
  document.getElementById('statsEpisodesWatched').textContent = stats.episodes;
  const hrs = Math.floor(stats.minutes / 60);
  const mins = stats.minutes % 60;
  document.getElementById('statsTimeSpent').textContent = `${hrs}h ${mins}m`;
}

// Call updateStatsPanel on page load
window.addEventListener('DOMContentLoaded', function() {
  updateStatsPanel();
});

// Update stats when watching a movie or episode
function playMovie(encItem) {
  const item = JSON.parse(decodeURIComponent(encItem));
  setLastPlaying({...item, type: "Movie"});
  openModal(getMovieUrl(item));
  updateLastPlayingBlock();

  // Update stats
  let stats = getStats();
  stats.movies += 1;
  stats.minutes += 120; // Assume 2 hours/movie
  saveStats(stats);
  updateStatsPanel();
}

function askTvPlay(encItem) {
  const item = JSON.parse(decodeURIComponent(encItem));
  let season = prompt("Enter season number:", "1");
  if (season === null) return;
  season = season.replace(/[^0-9]/g, "");
  if (!season || +season < 1) {
    alert("Invalid season.");
    return;
  }
  let episode = prompt("Enter episode number:", "1");
  if (episode === null) return;
  episode = episode.replace(/[^0-9]/g, "");
  if (!episode || +episode < 1) {
    alert("Invalid episode.");
    return;
  }
  setLastPlaying({...item, type: "TV", season: season, episode: episode});
  openModal(getTvUrl(item, season, episode));
  updateLastPlayingBlock();

  // Update stats
  let stats = getStats();
  stats.episodes += 1;
  stats.minutes += 45; // Estimate 45min/episode
  saveStats(stats);
  updateStatsPanel();
}
</script>
</body>
</html>
